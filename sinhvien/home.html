<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Trang ch·ªß sinh vi√™n - DocShare">
    <title>Trang ch·ªß - DocShare</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i...</p>
    </div>

    <!-- Notification Toast -->
    <div id="notificationToast" class="notification-toast">
        <span id="toastMessage"></span>
        <button onclick="closeToast()" class="toast-close">&times;</button>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <a href="../index.html" style="text-decoration: none; color: inherit;">
                    <h1>üìö DocShare</h1>
                </a>
                <span class="logo-subtitle">H·ªçc t·∫≠p & Chia s·∫ª</span>
            </div>
            <nav class="nav">
                <a href="../index.html" class="nav-link">
                    <span class="nav-icon">üè†</span>
                    Trang ch·ªß
                </a>
                <a href="../documents/list.html" class="nav-link">
                    <span class="nav-icon">üîç</span>
                    Kh√°m ph√°
                </a>
                <a href="../index.html#features" class="nav-link">
                    <span class="nav-icon">‚ú®</span>
                    T√≠nh nƒÉng
                </a>
                <a href="../index.html#about" class="nav-link">
                    <span class="nav-icon">‚ÑπÔ∏è</span>
                    V·ªÅ ch√∫ng t√¥i
                </a>
                <div class="nav-buttons" id="authButtons" style="display: none;">
                    <a href="../login.html" class="btn-login">
                        <span>üîë</span> ƒêƒÉng nh·∫≠p
                    </a>
                    <a href="../register.html" class="btn-register">
                        <span>üìù</span> ƒêƒÉng k√Ω
                    </a>
                </div>
                <!-- User Dropdown (ch·ªâ hi·ªán khi ƒë√£ ƒëƒÉng nh·∫≠p) -->
                <div class="nav-buttons" id="userSection">
                    <a href="../admin/dashboard.html" id="adminLink" class="btn-danger" style="display: none;">
                        <span>üîë</span> Qu·∫£n tr·ªã
                    </a>
                    <div class="user-dropdown">
                        <button class="user-dropdown-btn" onclick="toggleUserDropdown()">
                            <span class="user-icon">üë§</span>
                            <span id="userNameHeader">Ng∆∞·ªùi d√πng</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </button>
                        <div class="user-dropdown-menu" id="userDropdownMenu">
                            <div class="dropdown-header">
                                <span class="user-icon">üë§</span>
                                <span id="dropdownUserEmail" style="margin-left: 8px;">email@example.com</span>
                            </div>
                            <div class="dropdown-content-grid">
                                <a href="./home.html" class="dropdown-item">
                                    <span class="dropdown-icon">üìä</span>
                                    <span>Dashboard</span>
                                </a>
                                <a href="./my-documents.html" class="dropdown-item">
                                    <span class="dropdown-icon">üìÑ</span>
                                    <span>T√†i li·ªáu c·ªßa t√¥i</span>
                                </a>
                                <a href="./upload.html" class="dropdown-item">
                                    <span class="dropdown-icon">‚¨ÜÔ∏è</span>
                                    <span>T·∫£i l√™n</span>
                                </a>
                                <a href="./profile.html" class="dropdown-item">
                                    <span class="dropdown-icon">‚öôÔ∏è</span>
                                    <span>C√†i ƒë·∫∑t</span>
                                </a>
                            </div>
                            <div class="dropdown-divider"></div>
                            <button onclick="logout()" class="dropdown-item dropdown-logout">
                                <span class="dropdown-icon">üö™</span>
                                <span>ƒêƒÉng xu·∫•t</span>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Main Dashboard -->
    <section class="dashboard">
        <div class="container">
            <!-- Welcome Header -->
            <div class="dashboard-header">
                <div>
                    <h2>üëã Xin ch√†o, <span id="userName">Sinh vi√™n</span>!</h2>
                    <p style="opacity: 0.9; margin-top: 8px; font-size: 1.05rem;">Ch√†o m·ª´ng b·∫°n quay l·∫°i v·ªõi DocShare</p>
                    <p style="opacity: 0.85; margin-top: 5px; font-size: 0.95rem;" id="currentDateTime"></p>
                </div>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <a href="./upload.html" class="btn-cta-primary" style="padding: 12px 25px; font-size: 1rem;">
                        <span>‚¨ÜÔ∏è</span> T·∫£i t√†i li·ªáu l√™n
                    </a>
                    <a href="../documents/list.html" class="btn-cta-secondary" style="padding: 12px 25px; font-size: 1rem; background: rgba(255,255,255,0.2); border: 2px solid white;">
                        <span>üîç</span> Kh√°m ph√°
                    </a>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">üìÑ</div>
                    <h3 id="myDocsCount">0</h3>
                    <p>T√†i li·ªáu c·ªßa t√¥i</p>
                </div>
                <div class="stat-card">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">üëÅÔ∏è</div>
                    <h3 id="totalViews">0</h3>
                    <p>L∆∞·ª£t xem</p>
                </div>
                <div class="stat-card">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">‚¨áÔ∏è</div>
                    <h3 id="totalDownloads">0</h3>
                    <p>L∆∞·ª£t t·∫£i</p>
                </div>
                <div class="stat-card">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">‚≠ê</div>
                    <h3 id="avgRating">0</h3>
                    <p>ƒê√°nh gi√° TB</p>
                </div>
            </div>

            <!-- Main Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Left Column -->
                <div>
                    <!-- Quick Actions -->
                    <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 30px;">
                        <h3 style="margin-bottom: 25px; color: #2c3e50; font-size: 1.5rem; font-weight: 700;">‚ö° Thao t√°c nhanh</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            <a href="./upload.html" class="card hover-lift" style="text-decoration: none; padding: 20px; text-align: center; cursor: pointer; border: 2px solid #e9ecef;">
                                <div style="font-size: 2.5rem; margin-bottom: 8px;">‚¨ÜÔ∏è</div>
                                <h4 style="color: #2c3e50; margin-bottom: 3px; font-size: 0.95rem;">T·∫£i l√™n</h4>
                                <p style="color: #666; font-size: 0.8rem;">Chia s·∫ª t√†i li·ªáu</p>
                            </a>
                            <a href="./my-documents.html" class="card hover-lift" style="text-decoration: none; padding: 20px; text-align: center; cursor: pointer; border: 2px solid #e9ecef;">
                                <div style="font-size: 2.5rem; margin-bottom: 8px;">üìÑ</div>
                                <h4 style="color: #2c3e50; margin-bottom: 3px; font-size: 0.95rem;">Qu·∫£n l√Ω</h4>
                                <p style="color: #666; font-size: 0.8rem;">T√†i li·ªáu c·ªßa t√¥i</p>
                            </a>
                            <a href="../documents/list.html" class="card hover-lift" style="text-decoration: none; padding: 20px; text-align: center; cursor: pointer; border: 2px solid #e9ecef;">
                                <div style="font-size: 2.5rem; margin-bottom: 8px;">üîç</div>
                                <h4 style="color: #2c3e50; margin-bottom: 3px; font-size: 0.95rem;">T√¨m ki·∫øm</h4>
                                <p style="color: #666; font-size: 0.8rem;">Kh√°m ph√°</p>
                            </a>
                            <a href="./profile.html" class="card hover-lift" style="text-decoration: none; padding: 20px; text-align: center; cursor: pointer; border: 2px solid #e9ecef;">
                                <div style="font-size: 2.5rem; margin-bottom: 8px;">‚öôÔ∏è</div>
                                <h4 style="color: #2c3e50; margin-bottom: 3px; font-size: 0.95rem;">C√†i ƒë·∫∑t</h4>
                                <p style="color: #666; font-size: 0.8rem;">Th√¥ng tin</p>
                            </a>
                        </div>
                    </div>

                    <!-- Study Goals -->
                    <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 30px;">
                        <h3 style="margin-bottom: 25px; color: #2c3e50; font-size: 1.5rem; font-weight: 700;">üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h3>
                        <div id="studyGoals">
                            <div class="goal-progress-item">
                                <div class="goal-header">
                                    <div class="goal-title">
                                        <span>üìö</span>
                                        <span>ƒê·ªçc 10 t√†i li·ªáu/th√°ng</span>
                                    </div>
                                    <div class="goal-percentage">7/10</div>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 70%"></div>
                                </div>
                            </div>
                            <div class="goal-progress-item">
                                <div class="goal-header">
                                    <div class="goal-title">
                                        <span>‚¨ÜÔ∏è</span>
                                        <span>Chia s·∫ª 5 t√†i li·ªáu</span>
                                    </div>
                                    <div class="goal-percentage">3/5</div>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 60%; background: linear-gradient(135deg, #27ae60 0%, #229954 100%);"></div>
                                </div>
                            </div>
                            <div class="goal-progress-item">
                                <div class="goal-header">
                                    <div class="goal-title">
                                        <span>‚≠ê</span>
                                        <span>ƒê·∫°t 100 ƒëi·ªÉm danh ti·∫øng</span>
                                    </div>
                                    <div class="goal-percentage">85/100</div>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: 85%; background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Timeline -->
                    <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="margin: 0; color: #2c3e50; font-size: 1.5rem; font-weight: 700;">üìã Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h3>
                            <a href="./my-documents.html" style="color: #667eea; font-weight: 600; font-size: 0.9rem;">Xem t·∫•t c·∫£ ‚Üí</a>
                        </div>
                        <div id="activityTimeline" class="activity-timeline">
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px;">
                                        <span style="margin-right: 8px;">‚¨ÜÔ∏è</span>
                                        ƒê√£ t·∫£i l√™n "B√†i gi·∫£ng To√°n cao c·∫•p A1"
                                    </p>
                                    <div class="timeline-time">2 gi·ªù tr∆∞·ªõc</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px;">
                                        <span style="margin-right: 8px;">‚¨áÔ∏è</span>
                                        ƒê√£ t·∫£i xu·ªëng "L·∫≠p tr√¨nh C++ n√¢ng cao"
                                    </p>
                                    <div class="timeline-time">5 gi·ªù tr∆∞·ªõc</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px;">
                                        <span style="margin-right: 8px;">üí¨</span>
                                        ƒê√£ b√¨nh lu·∫≠n v·ªÅ "C∆° s·ªü d·ªØ li·ªáu"
                                    </p>
                                    <div class="timeline-time">1 ng√†y tr∆∞·ªõc</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px;">
                                        <span style="margin-right: 8px;">‚≠ê</span>
                                        ƒê√£ ƒë√°nh gi√° "V·∫≠t l√Ω ƒë·∫°i c∆∞∆°ng"
                                    </p>
                                    <div class="timeline-time">2 ng√†y tr∆∞·ªõc</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px;">
                                        <span style="margin-right: 8px;">üëÅÔ∏è</span>
                                        ƒê√£ xem "Ti·∫øng Anh chuy√™n ng√†nh"
                                    </p>
                                    <div class="timeline-time">3 ng√†y tr∆∞·ªõc</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- My Recent Documents -->
                    <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="margin: 0; color: #2c3e50; font-size: 1.5rem; font-weight: 700;">üìö T√†i li·ªáu c·ªßa t√¥i</h3>
                            <a href="./my-documents.html" style="color: #667eea; font-weight: 600; font-size: 0.9rem;">Xem t·∫•t c·∫£ ‚Üí</a>
                        </div>
                        <div id="myDocuments" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px;">
                            <!-- Documents will be loaded here -->
                            <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                                <div style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;">üì≠</div>
                                <p style="color: #666; margin-bottom: 15px;">Ch∆∞a c√≥ t√†i li·ªáu</p>
                                <a href="./upload.html" class="btn" style="width: auto; display: inline-flex;">
                                    <span>‚¨ÜÔ∏è</span> T·∫£i l√™n ngay
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div>
                    <!-- Study Streak -->
                    <div class="study-streak">
                        <div style="font-size: 2.5rem; margin-bottom: 10px;">üî•</div>
                        <div class="streak-label">Chu·ªói ng√†y h·ªçc</div>
                        <div class="streak-number" id="studyStreak">7</div>
                        <div class="streak-label">ng√†y li√™n ti·∫øp</div>
                    </div>

                    <!-- Notifications -->
                    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0; color: #2c3e50; font-size: 1.2rem; font-weight: 700;">üîî Th√¥ng b√°o</h3>
                            <span style="background: #e74c3c; color: white; padding: 3px 10px; border-radius: 12px; font-size: 0.8rem; font-weight: 700;">3</span>
                        </div>
                        <div id="notifications">
                            <div class="notification-item notification-unread">
                                <div style="display: flex; justify-content: between; align-items: start; gap: 10px;">
                                    <div style="font-size: 1.3rem;">üì¢</div>
                                    <div style="flex: 1;">
                                        <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px; font-size: 0.9rem;">
                                            T√†i li·ªáu m·ªõi ƒë∆∞·ª£c th√™m
                                        </p>
                                        <p style="font-size: 0.8rem; color: #666;">
                                            "L·∫≠p tr√¨nh Python c∆° b·∫£n" v·ª´a ƒë∆∞·ª£c t·∫£i l√™n
                                        </p>
                                        <span style="font-size: 0.75rem; color: #999;">5 ph√∫t tr∆∞·ªõc</span>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-item notification-unread">
                                <div style="display: flex; justify-content: between; align-items: start; gap: 10px;">
                                    <div style="font-size: 1.3rem;">üí¨</div>
                                    <div style="flex: 1;">
                                        <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px; font-size: 0.9rem;">
                                            B√¨nh lu·∫≠n m·ªõi
                                        </p>
                                        <p style="font-size: 0.8rem; color: #666;">
                                            Ai ƒë√≥ ƒë√£ b√¨nh lu·∫≠n v·ªÅ t√†i li·ªáu c·ªßa b·∫°n
                                        </p>
                                        <span style="font-size: 0.75rem; color: #999;">1 gi·ªù tr∆∞·ªõc</span>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-item notification-unread">
                                <div style="display: flex; justify-content: between; align-items: start; gap: 10px;">
                                    <div style="font-size: 1.3rem;">üèÜ</div>
                                    <div style="flex: 1;">
                                        <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px; font-size: 0.9rem;">
                                            ƒê·∫°t th√†nh t·ª±u m·ªõi
                                        </p>
                                        <p style="font-size: 0.8rem; color: #666;">
                                            B·∫°n ƒë√£ m·ªü kh√≥a "Ng∆∞·ªùi ƒë√≥ng g√≥p t√≠ch c·ª±c"
                                        </p>
                                        <span style="font-size: 0.75rem; color: #999;">2 gi·ªù tr∆∞·ªõc</span>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div style="display: flex; justify-content: between; align-items: start; gap: 10px;">
                                    <div style="font-size: 1.3rem;">‚≠ê</div>
                                    <div style="flex: 1;">
                                        <p style="font-weight: 600; color: #2c3e50; margin-bottom: 3px; font-size: 0.9rem;">
                                            ƒê√°nh gi√° m·ªõi
                                        </p>
                                        <p style="font-size: 0.8rem; color: #666;">
                                            T√†i li·ªáu c·ªßa b·∫°n ƒë∆∞·ª£c ƒë√°nh gi√° 5 sao
                                        </p>
                                        <span style="font-size: 0.75rem; color: #999;">1 ng√†y tr∆∞·ªõc</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calendar -->
                    <div class="calendar-container" style="margin-bottom: 20px;">
                        <div class="calendar-header">
                            <button onclick="previousMonth()" style="background: transparent; border: none; cursor: pointer; font-size: 1.3rem;">‚Äπ</button>
                            <h3 style="margin: 0; color: #2c3e50; font-size: 1.1rem; font-weight: 700;" id="calendarMonth">Th√°ng 11, 2024</h3>
                            <button onclick="nextMonth()" style="background: transparent; border: none; cursor: pointer; font-size: 1.3rem;">‚Ä∫</button>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <div class="calendar-day header">CN</div>
                            <div class="calendar-day header">T2</div>
                            <div class="calendar-day header">T3</div>
                            <div class="calendar-day header">T4</div>
                            <div class="calendar-day header">T5</div>
                            <div class="calendar-day header">T6</div>
                            <div class="calendar-day header">T7</div>
                            <!-- Calendar days will be generated here -->
                        </div>
                    </div>

                    <!-- Monthly Stats -->
                    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 20px;">
                        <h3 style="margin-bottom: 20px; color: #2c3e50; font-size: 1.2rem; font-weight: 700;">üìà Th·ªëng k√™ th√°ng n√†y</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div style="padding: 12px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                    <span style="color: #555; font-weight: 600; font-size: 0.9rem;">üìÑ T√†i li·ªáu m·ªõi</span>
                                    <span style="color: #667eea; font-weight: 700; font-size: 1.1rem;" id="monthlyDocs">3</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" id="monthlyDocsProgress" style="width: 60%"></div>
                                </div>
                            </div>
                            <div style="padding: 12px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                    <span style="color: #555; font-weight: 600; font-size: 0.9rem;">üëÅÔ∏è L∆∞·ª£t xem</span>
                                    <span style="color: #27ae60; font-weight: 700; font-size: 1.1rem;" id="monthlyViews">127</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" id="monthlyViewsProgress" style="width: 85%; background: linear-gradient(135deg, #27ae60 0%, #229954 100%);"></div>
                                </div>
                            </div>
                            <div style="padding: 12px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                    <span style="color: #555; font-weight: 600; font-size: 0.9rem;">‚¨áÔ∏è L∆∞·ª£t t·∫£i</span>
                                    <span style="color: #e74c3c; font-weight: 700; font-size: 1.1rem;" id="monthlyDownloads">54</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" id="monthlyDownloadsProgress" style="width: 45%; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Achievements -->
                    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 20px;">
                        <h3 style="margin-bottom: 20px; color: #2c3e50; font-size: 1.2rem; font-weight: 700;">üèÜ Th√†nh t·ª±u</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            <div class="achievement-badge">
                                <span class="achievement-icon">üìö</span>
                                <div class="achievement-name">Ng∆∞·ªùi ƒë·ªçc</div>
                                <div class="achievement-desc">ƒê·ªçc 50+ t√†i li·ªáu</div>
                            </div>
                            <div class="achievement-badge">
                                <span class="achievement-icon">‚¨ÜÔ∏è</span>
                                <div class="achievement-name">Ng∆∞·ªùi chia s·∫ª</div>
                                <div class="achievement-desc">T·∫£i l√™n 10+ t√†i li·ªáu</div>
                            </div>
                            <div class="achievement-badge">
                                <span class="achievement-icon">‚≠ê</span>
                                <div class="achievement-name">ƒê√°nh gi√° vi√™n</div>
                                <div class="achievement-desc">50+ ƒë√°nh gi√°</div>
                            </div>
                            <div class="achievement-badge">
                                <span class="achievement-icon">üí¨</span>
                                <div class="achievement-name">Ng∆∞·ªùi b√¨nh lu·∫≠n</div>
                                <div class="achievement-desc">100+ b√¨nh lu·∫≠n</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommended Documents -->
            <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h3 style="margin: 0; color: #2c3e50; font-size: 1.5rem; font-weight: 700;">üí° ƒê·ªÅ xu·∫•t cho b·∫°n</h3>
                    <a href="../documents/list.html?recommended=true" style="color: #667eea; font-weight: 600; font-size: 0.9rem;">Xem t·∫•t c·∫£ ‚Üí</a>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                    <div class="recommendation-card">
                        <div class="recommendation-image">üìä</div>
                        <div class="recommendation-content">
                            <div class="recommendation-title">To√°n r·ªùi r·∫°c</div>
                            <div class="recommendation-meta">
                                <span>üëÅÔ∏è 2.5K</span>
                                <span>‚≠ê 4.8</span>
                            </div>
                        </div>
                    </div>
                    <div class="recommendation-card">
                        <div class="recommendation-image" style="background: linear-gradient(135deg, #27ae60 0%, #229954 100%);">üíª</div>
                        <div class="recommendation-content">
                            <div class="recommendation-title">Java Spring Boot</div>
                            <div class="recommendation-meta">
                                <span>üëÅÔ∏è 3.2K</span>
                                <span>‚≠ê 4.9</span>
                            </div>
                        </div>
                    </div>
                    <div class="recommendation-card">
                        <div class="recommendation-image" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">üóÑÔ∏è</div>
                        <div class="recommendation-content">
                            <div class="recommendation-title">SQL n√¢ng cao</div>
                            <div class="recommendation-meta">
                                <span>üëÅÔ∏è 1.8K</span>
                                <span>‚≠ê 4.7</span>
                            </div>
                        </div>
                    </div>
                    <div class="recommendation-card">
                        <div class="recommendation-image" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">üåê</div>
                        <div class="recommendation-content">
                            <div class="recommendation-title">Web Development</div>
                            <div class="recommendation-meta">
                                <span>üëÅÔ∏è 4.1K</span>
                                <span>‚≠ê 4.8</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Leaderboard -->
            <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h3 style="margin: 0; color: #2c3e50; font-size: 1.5rem; font-weight: 700;">üèÖ B·∫£ng x·∫øp h·∫°ng</h3>
                    <a href="./leaderboard.html" style="color: #667eea; font-weight: 600; font-size: 0.9rem;">Xem t·∫•t c·∫£ ‚Üí</a>
                </div>
                <div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank gold">1</div>
                        <div class="leaderboard-avatar">üëë</div>
                        <div class="leaderboard-info">
                            <div class="leaderboard-name">Nguy·ªÖn VƒÉn A</div>
                            <div class="leaderboard-stats">125 t√†i li·ªáu ‚Ä¢ 50K l∆∞·ª£t xem</div>
                        </div>
                        <div class="leaderboard-points">1,250</div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank silver">2</div>
                        <div class="leaderboard-avatar" style="background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);">üë§</div>
                        <div class="leaderboard-info">
                            <div class="leaderboard-name">Tr·∫ßn Th·ªã B</div>
                            <div class="leaderboard-stats">98 t√†i li·ªáu ‚Ä¢ 42K l∆∞·ª£t xem</div>
                        </div>
                        <div class="leaderboard-points">980</div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank bronze">3</div>
                        <div class="leaderboard-avatar" style="background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);">üë§</div>
                        <div class="leaderboard-info">
                            <div class="leaderboard-name">L√™ VƒÉn C</div>
                            <div class="leaderboard-stats">87 t√†i li·ªáu ‚Ä¢ 38K l∆∞·ª£t xem</div>
                        </div>
                        <div class="leaderboard-points">870</div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank">4</div>
                        <div class="leaderboard-avatar">üë§</div>
                        <div class="leaderboard-info">
                            <div class="leaderboard-name">Ph·∫°m Th·ªã D</div>
                            <div class="leaderboard-stats">75 t√†i li·ªáu ‚Ä¢ 32K l∆∞·ª£t xem</div>
                        </div>
                        <div class="leaderboard-points">750</div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank">5</div>
                        <div class="leaderboard-avatar">üë§</div>
                        <div class="leaderboard-info">
                            <div class="leaderboard-name">Ho√†ng VƒÉn E</div>
                            <div class="leaderboard-stats">68 t√†i li·ªáu ‚Ä¢ 28K l∆∞·ª£t xem</div>
                        </div>
                        <div class="leaderboard-points">680</div>
                    </div>
                </div>
            </div>

            <!-- Popular Documents -->
            <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); margin-bottom: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h3 style="margin: 0; color: #2c3e50; font-size: 1.5rem; font-weight: 700;">üî• T√†i li·ªáu ph·ªï bi·∫øn</h3>
                    <a href="../documents/list.html?sort=popular" style="color: #667eea; font-weight: 600; font-size: 0.9rem;">Xem t·∫•t c·∫£ ‚Üí</a>
                </div>
                <div id="popularDocuments" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px;">
                    <p style="text-align: center; color: #666; padding: 20px; grid-column: 1 / -1;">ƒêang t·∫£i...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>üìö DocShare</h4>
                    <p>N·ªÅn t·∫£ng chia s·∫ª t√†i li·ªáu h·ªçc t·∫≠p h√†ng ƒë·∫ßu d√†nh cho sinh vi√™n Vi·ªát Nam</p>
                    <div class="footer-social">
                        <a href="#" title="Facebook">üìò</a>
                        <a href="#" title="Twitter">üê¶</a>
                        <a href="#" title="Instagram">üì∑</a>
                        <a href="#" title="LinkedIn">üíº</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Li√™n k·∫øt nhanh</h4>
                    <ul>
                        <li><a href="./home.html">Dashboard</a></li>
                        <li><a href="./my-documents.html">T√†i li·ªáu c·ªßa t√¥i</a></li>
                        <li><a href="./upload.html">T·∫£i l√™n</a></li>
                        <li><a href="./profile.html">C√†i ƒë·∫∑t</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>H·ªó tr·ª£</h4>
                    <ul>
                        <li><a href="../help.html">Trung t√¢m tr·ª£ gi√∫p</a></li>
                        <li><a href="../contact.html">Li√™n h·ªá</a></li>
                        <li><a href="../faq.html">FAQ</a></li>
                        <li><a href="../feedback.html">G√≥p √Ω</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Ph√°p l√Ω</h4>
                    <ul>
                        <li><a href="../terms.html">ƒêi·ªÅu kho·∫£n</a></li>
                        <li><a href="../privacy.html">B·∫£o m·∫≠t</a></li>
                        <li><a href="../copyright.html">B·∫£n quy·ªÅn</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 DocShare. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top -->
    <button id="backToTop" class="back-to-top" onclick="scrollToTop()">‚Üë</button>

    <!-- Scripts -->
    <script src="../main.js"></script>
    <script src="../header-auth.js"></script>
    <script>
        // Global variables
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        const monthNames = ["Th√°ng 1", "Th√°ng 2", "Th√°ng 3", "Th√°ng 4", "Th√°ng 5", "Th√°ng 6",
            "Th√°ng 7", "Th√°ng 8", "Th√°ng 9", "Th√°ng 10", "Th√°ng 11", "Th√°ng 12"
        ];

        // Check authentication on page load
        window.addEventListener('DOMContentLoaded', function() {
            checkAuthAndLoadData();
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
            generateCalendar();
        });

        // Update current date time
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            const dateTimeStr = now.toLocaleDateString('vi-VN', options);
            const dateTimeEl = document.getElementById('currentDateTime');
            if (dateTimeEl) {
                dateTimeEl.textContent = dateTimeStr;
            }
        }

        // Check authentication and load dashboard data
        async function checkAuthAndLoadData() {
            const user = getUser();
            const token = getToken();

            if (!user || !token) {
                showToast('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c', 'info');
                setTimeout(() => {
                    window.location.href = '../login.html';
                }, 1500);
                return;
            }

            // Update user info in header
            updateUserInfo(user);

            // Load dashboard data
            await loadDashboardStats();
            await loadMyDocuments();
            await loadPopularDocuments();
            
            // Animate progress bars after load
            setTimeout(() => {
                animateProgressBars();
            }, 500);
        }

        // Update user information in UI
        function updateUserInfo(user) {
            const userName = document.getElementById('userName');
            const userNameHeader = document.getElementById('userNameHeader');
            const dropdownUserEmail = document.getElementById('dropdownUserEmail');

            if (userName) {
                const displayName = user.ho_ten || user.email.split('@')[0];
                userName.textContent = displayName;
            }

            if (userNameHeader) {
                const displayName = user.ho_ten || user.email.split('@')[0];
                userNameHeader.textContent = displayName.length > 20 ? displayName.substring(0, 20) + '...' : displayName;
            }

            if (dropdownUserEmail) {
                dropdownUserEmail.textContent = user.email;
            }
        }

        // Load dashboard statistics
        async function loadDashboardStats() {
            try {
                const response = await apiGet('/documents/my-stats');
                
                if (response && response.ok) {
                    const stats = await response.json();
                    
                    // Update stat cards with animation
                    animateValue('myDocsCount', 0, stats.totalDocuments || 0, 1000);
                    animateValue('totalViews', 0, stats.totalViews || 0, 1000);
                    animateValue('totalDownloads', 0, stats.totalDownloads || 0, 1000);
                    
                    const avgRating = stats.averageRating || 0;
                    document.getElementById('avgRating').textContent = avgRating.toFixed(1);
                    
                    // Update monthly stats
                    const monthlyDocs = stats.monthlyDocuments || 3;
                    const monthlyViews = stats.monthlyViews || 127;
                    const monthlyDownloads = stats.monthlyDownloads || 54;
                    
                    document.getElementById('monthlyDocs').textContent = monthlyDocs;
                    document.getElementById('monthlyViews').textContent = monthlyViews;
                    document.getElementById('monthlyDownloads').textContent = monthlyDownloads;
                    
                    // Update study streak
                    const studyStreak = stats.studyStreak || 7;
                    animateValue('studyStreak', 0, studyStreak, 1500);
                } else {
                    // Use placeholder data if API fails
                    usePlaceholderStats();
                }
            } catch (error) {
                console.error('Error loading stats:', error);
                usePlaceholderStats();
            }
        }

        // Use placeholder statistics
        function usePlaceholderStats() {
            const randomDocs = Math.floor(Math.random() * 15) + 5;
            const randomViews = randomDocs * Math.floor(Math.random() * 50 + 20);
            const randomDownloads = Math.floor(randomViews * 0.3);
            
            animateValue('myDocsCount', 0, randomDocs, 1000);
            animateValue('totalViews', 0, randomViews, 1000);
            animateValue('totalDownloads', 0, randomDownloads, 1000);
            document.getElementById('avgRating').textContent = '4.5';
            
            // Monthly stats
            const monthlyDocs = Math.floor(randomDocs * 0.3);
            const monthlyViews = Math.floor(randomViews * 0.4);
            const monthlyDownloads = Math.floor(randomDownloads * 0.4);
            
            document.getElementById('monthlyDocs').textContent = monthlyDocs;
            document.getElementById('monthlyViews').textContent = monthlyViews;
            document.getElementById('monthlyDownloads').textContent = monthlyDownloads;
            
            animateValue('studyStreak', 0, 7, 1500);
        }

        // Animate number count up
        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            if (!element) return;
            
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current);
            }, 16);
        }

        // Animate progress bars
        function animateProgressBars() {
            const progressBars = document.querySelectorAll('.progress-bar');
            progressBars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = width;
                }, 100);
            });
        }

        // Load my documents
        async function loadMyDocuments() {
            const container = document.getElementById('myDocuments');
            if (!container) return;
            
            try {
                const response = await apiGet('/documents/my-documents?limit=4');
                
                if (response && response.ok) {
                    const data = await response.json();
                    const documents = data.documents || data;
                    
                    if (documents && documents.length > 0) {
                        container.innerHTML = documents.map(doc => createMiniDocumentCard(doc)).join('');
                    } else {
                        // Keep empty state with upload button
                    }
                } else {
                    // Keep empty state or show error
                }
            } catch (error) {
                console.error('Error loading my documents:', error);
            }
        }

        // Load popular documents
        async function loadPopularDocuments() {
            const container = document.getElementById('popularDocuments');
            if (!container) return;
            
            try {
                const response = await apiGet('/documents/popular?limit=4');
                
                if (response && response.ok) {
                    const documents = await response.json();
                    
                    if (documents && documents.length > 0) {
                        container.innerHTML = documents.map(doc => createMiniDocumentCard(doc)).join('');
                    } else {
                        container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px; grid-column: 1 / -1;">ƒêang c·∫≠p nh·∫≠t...</p>';
                    }
                } else {
                    // Use placeholder cards
                    container.innerHTML = createPlaceholderDocuments();
                }
            } catch (error) {
                console.error('Error loading popular documents:', error);
                container.innerHTML = createPlaceholderDocuments();
            }
        }

        // Create mini document card
        function createMiniDocumentCard(doc) {
            const colors = ['#667eea', '#27ae60', '#e74c3c', '#f39c12', '#3498db', '#9b59b6'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            
            return `
                <div class="recommendation-card" onclick="window.location.href='../documents/detail.html?id=${doc.ma_tai_lieu || doc.id}'">
                    <div class="recommendation-image" style="background: linear-gradient(135deg, ${randomColor} 0%, ${randomColor}dd 100%);">
                        üìÑ
                    </div>
                    <div class="recommendation-content">
                        <div class="recommendation-title">${doc.tieu_de || doc.title}</div>
                        <div class="recommendation-meta">
                            <span>üëÅÔ∏è ${formatNumber(doc.so_luot_xem || doc.views || 0)}</span>
                            <span>‚≠ê ${doc.rating || '4.5'}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Create placeholder documents
        function createPlaceholderDocuments() {
            const placeholders = [
                { id: 1, title: 'To√°n cao c·∫•p A1', views: 1234 },
                { id: 2, title: 'L·∫≠p tr√¨nh C++', views: 2456 },
                { id: 3, title: 'C∆° s·ªü d·ªØ li·ªáu', views: 1678 },
                { id: 4, title: 'V·∫≠t l√Ω ƒë·∫°i c∆∞∆°ng', views: 923 }
            ];
            
            return placeholders.map(doc => createMiniDocumentCard({
                ma_tai_lieu: doc.id,
                tieu_de: doc.title,
                so_luot_xem: doc.views,
                rating: '4.7'
            })).join('');
        }

        // Calendar functions
        function generateCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            if (!calendarGrid) return;
            
            // Update month display
            document.getElementById('calendarMonth').textContent = `${monthNames[currentMonth]}, ${currentYear}`;
            
            // Get first day of month and number of days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const today = new Date();
            
            // Clear existing days (keep headers)
            const headers = Array.from(calendarGrid.children).slice(0, 7);
            calendarGrid.innerHTML = '';
            headers.forEach(header => calendarGrid.appendChild(header));
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day inactive';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = day;
                
                // Check if today
                if (currentYear === today.getFullYear() && 
                    currentMonth === today.getMonth() && 
                    day === today.getDate()) {
                    dayEl.classList.add('today');
                }
                
                // Random events (for demo)
                if (Math.random() > 0.7) {
                    dayEl.classList.add('has-event');
                    dayEl.title = 'C√≥ ho·∫°t ƒë·ªông';
                }
                
                calendarGrid.appendChild(dayEl);
            }
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar();
        }

        // Toggle user dropdown
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdownMenu');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('userDropdownMenu');
            const dropdownBtn = document.querySelector('.user-dropdown-btn');
            
            if (dropdown && dropdownBtn) {
                if (!dropdown.contains(e.target) && !dropdownBtn.contains(e.target)) {
                    dropdown.classList.remove('show');
                }
            }
        });

        // Toggle mobile menu
        function toggleMobileMenu() {
            const nav = document.querySelector('.nav');
            if (nav) {
                nav.classList.toggle('active');
            }
        }

        // Format number helper
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        // Notification click handlers
        document.addEventListener('DOMContentLoaded', function() {
            const notificationItems = document.querySelectorAll('.notification-item');
            notificationItems.forEach(item => {
                item.addEventListener('click', function() {
                    this.classList.remove('notification-unread');
                    // Handle notification click
                    showToast('ƒê√£ ƒë√°nh d·∫•u l√† ƒë√£ ƒë·ªçc', 'success');
                });
            });
        });

        // Auto-refresh data every 5 minutes
        setInterval(() => {
            loadDashboardStats();
        }, 300000);

        // Add smooth scroll behavior
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>